<dom-module id="game-ratings">
  <style>
    :host {
      display: block;
    }

    iron-icon {
      color: var(--paper-amber-600);
      height: 40px;
      width: 40px;
    }

    iron-icon.empty:hover {
      fill: var(--paper-amber-900);
    }
  </style>
  <template>
    <template id="stars" is="dom-repeat" items="{{stars}}">
      <iron-icon icon="star" hidden$="{{hideFull(item)}}" on-click="setRating"></iron-icon>
      <iron-icon class="empty" icon="star-border" hidden$="{{hideEmpty(item)}}" on-click="setRating"></iron-icon>
    </template>
  </template>

	<script>
	  (function() {
	    Polymer({
	      is: 'game-ratings',

	      properties: {
	        rating: {
            type: Number,
            notify: true,
            observer: 'refreshStars'
          },
          editable: Boolean,
          stars: {
            type: Array,
            notify: true,
            value: function() {
              return ['1', '2', '3', '4', '5'];
            }
          }
	      },

        hideFull: function(star) {
          return star > this.rating;
        },

        hideEmpty: function(star) {
          return star <= this.rating;
        },

        refreshStars: function() {
          this.set('stars', []);
          for (var i = 1; i <= 5; i++) {
            this.push('stars', i.toString());
          }

          this.$.stars.render();
        },

        setRating: function(e) {
          var model = e.model;
          this.rating = model.item;
        }
      });
	  })();
	</script>

</dom-module>
